"use strict";angular.module("eatTedApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","ngMaterial"]).config(["$routeProvider","$mdThemingProvider",function(a,b){b.theme("default").primaryPalette("grey"),a.when("/",{templateUrl:"views/feed_list.html"}).when("/detail",{templateUrl:"views/detail_view.html",controller:"DetailCtrl"}).otherwise({redirectTo:"/"})}]),google.load("feeds","1"),angular.module("eatTedApp").service("Feed",["$q","$rootScope",function(a,b){this.get=function(c){var d=a.defer(),e=new google.feeds.Feed(c);return e.setNumEntries(10),e.load(function(a){b.$apply(d.resolve(a))}),d.promise}}]),angular.module("eatTedApp").controller("FeedCtrl",["$scope","Feed","$timeout","$location",function(a,b,c,d){a.feedList=["http://feeds.feedburner.com/tedtalks_video"],a.scrollPos={},a.scrollClear=function(b){a.scrollPos[b]=0},a.setLoading=function(b){a.isLoading=b},a.loadFeed=function(c,e){a.setLoading(!0),b.get(c).then(function(b){if(b.error)alert("ERROR"+b.error.code+":"+b.error.message+"\nurl: "+c),a.setLoading(!1);else{e&&e();var f=document.createElement("a");f.href=b.feed.link,b.feed.viewAt=f.hostname,a.feed_result=b.feed,a.scrollClear("/"),d.path("/"),0===a.feed_result.entries&&a.setLoading(!1)}})},a.mediaUrl=function(a){return a&&a.mediaGroups?a.mediaGroups[0].contents[0]:{url:""}},a.hasVideo=function(b){var c=a.mediaUrl(b);return c.type?"video/mp4"==c.type:c.url?-1!=c.url.indexOf(".mp4"):!1},a.ifPathNot=function(a){return d.path()!=a},a.setCurrEntry=function(b){a.currEntry=b},a.loadFeed(a.feedList[0])}]),angular.module("eatTedApp").filter("trusted",["$sce",function(a){return function(b){return a.trustAsResourceUrl(b)}}]),angular.module("eatTedApp").controller("ListCtrl",["$scope","$location",function(a,b){a.layoutDone=function(){a.setLoading(!1)},a.viewDetail=function(c){a.setCurrEntry(c),b.path("/detail")}}]),angular.module("eatTedApp").controller("DetailCtrl",["$scope","$location",function(a,b){a.scrollClear(b.path()),a.videoPlay=a.hasVideo(a.currEntry)}]);